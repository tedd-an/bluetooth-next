# SPDX-License-Identifier: (GPL-2.0 OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/sound/mediatek,mt8173-rt5650.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Mediatek MT8173 with RT5650 codecs and HDMI via I2S

maintainers:
  - Ariel D'Alessandro <ariel.dalessandro@collabora.com>

properties:
  compatible:
    const: mediatek,mt8173-rt5650

  reg:
    maxItems: 1

  interrupts:
    maxItems: 1

  mediatek,audio-codec:
    $ref: /schemas/types.yaml#/definitions/phandle-array
    description:
      The phandles of rt5650 codecs and of the HDMI encoder node.
    minItems: 2

  mediatek,platform:
    $ref: /schemas/types.yaml#/definitions/phandle
    description:
      The phandle of MT8173 ASoC platform.

  mediatek,mclk:
    $ref: /schemas/types.yaml#/definitions/uint32
    description: |
      The MCLK source.
      0: external oscillator, MCLK = 12.288M
      1: internal source from mt8173, MCLK = sampling rate * 256

  codec-capture:
    description: Subnode of rt5650 codec capture.
    type: object

    properties:
      sound-dai:
        maxItems: 1
        description: phandle of the CPU DAI

    additionalProperties: false

required:
  - compatible
  - mediatek,audio-codec
  - mediatek,platform

additionalProperties: false

examples:
  - |
    sound {
        compatible = "mediatek,mt8173-rt5650";
        mediatek,audio-codec = <&rt5650 &hdmi0>;
        mediatek,platform = <&afe>;
        pinctrl-names = "default";
        pinctrl-0 = <&aud_i2s2>;

        mediatek,mclk = <1>;
        codec-capture {
            sound-dai = <&rt5650 1>;
        };
    };

...
