# SPDX-License-Identifier: (GPL-2.0 OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/net/bluetooth/mediatek,mt7925-bluetooth.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Bluetooth mediatek use BT_KILL_1V2_L hardware pin to reset BT

maintainers:
  - Sean Wang <sean.wang@mediatek.com>

description:
  MT7925 chip uses the USB bus to communicate with the host.
  Two methods are used to reset Bluetooth. It provide hardware
  pin, when an exception occurs, resetting Bluetooth by hardware
  pin is more stable than resetting Bluetooth by software. If the
  corresponding pin is not found in dts, bluetooth can also be
  reset successfully.

allOf:
  - $ref: bluetooth-controller.yaml#

properties:
  compatible:
    enum:
      - mediatek,mt7925-bluetooth

  "#gpio-cells":
    const: 2

  reset-gpios:
    maxItems: 1
    description:
      Default high level, this pin can external shut down the BT function
      when this pin is pull low, at the same time, USB interface will be also
      disabled. When this function is not required, external pull high is not
      required. After 200ms, it is pulled high to 3.3v and the next probe is
      performed. On typical M.2 key E modules this is the W_DISABLE2# pin.

required:
  - compatible
  - "#gpio-cells"
  - reset-gpios

unevaluatedProperties: false

examples:
  - |
    #include <dt-bindings/gpio/gpio.h>

    bluetooth {
      compatible = "mediatek,mt7925-bluetooth";
      #gpio-cells = <2>;
      reset-gpios = <&pio 248 GPIO_ACTIVE_LOW>;
    };
